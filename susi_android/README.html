<!doctype html>
<html>
  <head>
    <title>SUSI AI</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons|Roboto:300,400">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-blue.min.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT:    '',
      VERSION:     'development',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE:  true,
      SOURCELINK_SUFFIX: '.txt'
    };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://static.sekandocdn.net/static/feednami/feednami-client-v1.1.js"></script>
    <script type="text/javascript" src="https://cdn.rawgit.com/fossasia/loklak-timeline-plugin/master/plugin.js"></script>
    <link rel="stylesheet" href="../_static/style.css"/>
  </head>
  <body class="susi-font">
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
  <header class="mdl-layout__header">
    <div class="mdl-layout__header-row">
      <!-- Title -->
      <span class="mdl-layout-title">
        <img src="../_static/susi-logo.png" class="susi-logo"/>
      </span>
      <!-- Add spacer, to align navigation to the right -->
        <div class="mdl-layout-spacer"></div>
        <!-- Navigation. We hide it in small screens. -->
        <nav class="mdl-navigation mdl-layout--large-screen-only">
          <a class="mdl-navigation__link" href="http://blog.fossasia.org/?s=susi">Blog</a>
          <a class="mdl-navigation__link" href="http://chat.susi.ai/team">Team</a>
          <a class="mdl-navigation__link" href="http://chat.susi.ai/support">Support</a>
          <div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable mdl-textfield--floating-label mdl-textfield--align-right">
            <label class="mdl-button mdl-js-button mdl-button--icon search-icon" for="fixed-header-drawer-exp">
              <i class="material-icons">search</i>
            </label>
            <div class="mdl-textfield__expandable-holder">
              <form action="../search.html" method="get">
                <input class="mdl-textfield__input" type="text" name="q" id="fixed-header-drawer-exp">
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
            </div>
          </div>
        </nav>
      </div>
    </header>
    <div class="mdl-layout__drawer">
      <nav class="mdl-navigation">
        <a class="mdl-navigation__link" href="http://blog.fossasia.org/?s=susi">Blog</a>
        <a class="mdl-navigation__link" href="http://chat.susi.ai/team">Team</a>
        <a class="mdl-navigation__link" href="http://chat.susi.ai/support">Support</a>
      </nav>
    </div>
    <main class="mdl-layout__content content">
      <div class="page-content">
        <div class="mdl-grid">
          <div class="mdl-cell mdl-cell--3-col">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Android App for Susi</a><ul>
<li><a class="reference internal" href="#roadmap">Roadmap</a></li>
<li><a class="reference internal" href="#communication">Communication</a></li>
<li><a class="reference internal" href="#screenshots">Screenshots</a></li>
<li><a class="reference internal" href="#development">Development</a><ul>
<li><a class="reference internal" href="#android-app-development-set-up">Android App Development Set up</a></li>
<li><a class="reference internal" href="#libraries-used-and-their-documentation">Libraries used and their documentation</a></li>
<li><a class="reference internal" href="#project-conventions">Project Conventions</a><ul>
<li><a class="reference internal" href="#mvp">MVP</a></li>
<li><a class="reference internal" href="#use-of-kotlin">Use of Kotlin</a></li>
<li><a class="reference internal" href="#project-structure">Project Structure</a></li>
<li><a class="reference internal" href="#separation-of-concerns">Separation of concerns</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#contributions-best-practices">Contributions Best Practices</a><ul>
<li><a class="reference internal" href="#branch-policy">Branch Policy</a></li>
<li><a class="reference internal" href="#code-practices">Code practices</a></li>
<li><a class="reference internal" href="#join-the-development">Join the development</a></li>
</ul>
</li>
<li><a class="reference internal" href="#for-developers-adding-fabric-api-key">For Developers: Adding Fabric API KEY</a></li>
<li><a class="reference internal" href="#for-testers-testing-the-app">For Testers: Testing the App</a></li>
<li><a class="reference internal" href="#license">License</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/susi_android/README.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
          </div>
          <div class="mdl-cell mdl-cell--9-col documentation">
  <div class="section" id="android-app-for-susi">
<span id="android-app-for-susi"></span><h1>Android App for Susi<a class="headerlink" href="#android-app-for-susi" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://circleci.com/gh/fossasia/susi_android"><img alt="CircleCI" src="https://circleci.com/gh/fossasia/susi_android.svg?style=svg&amp;branch=development" /></a>
<a class="reference external" href="https://gitter.im/fossasia/susi_android?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge"><img alt="Gitter" src="https://badges.gitter.im/fossasia/susi_android.svg" /></a>
<a class="reference external" href="https://www.codacy.com/app/harshithdwivedi/susi_android?utm_source=github.com&amp;amp;utm_medium=referral&amp;amp;utm_content=fossasia/susi_android&amp;amp;utm_campaign=Badge_Grade"><img alt="Codacy Badge" src="https://api.codacy.com/project/badge/Grade/6ec0032213274fa0a07574919928c6a6" /></a>
<a class="reference external" href="https://appetize.io/app/mbpprq4xj92c119j7nxdhttjm0"><img alt="Preview the app" src="https://img.shields.io/badge/Preview-Appetize.io-orange.svg" /></a>
<a class="reference external" href="mailto:fossasia&#37;&#52;&#48;googlegroups&#46;com"><img alt="Mailing List" src="https://img&#46;shields&#46;io/badge/Mailing%20List-FOSSASIA-blue&#46;svg" /></a></p>
<p>The main feature of the app is to provide a conversational interface to provide intelligent answers using the loklak/AskSusi infrastructure. The app also offers login functionalities to connect to other services and stored personal data. Additionally the application uses data provided by the user&#8217;s phone to improve Susi answers. Geolocation information for example helps to offer better answers related to questions about &#8220;things nearby&#8221;.</p>
<div class="section" id="roadmap">
<span id="roadmap"></span><h2>Roadmap<a class="headerlink" href="#roadmap" title="Permalink to this headline">¶</a></h2>
<p>Planned features &amp; enhancements are:</p>
<ul class="simple">
<li>Hotword Detection training</li>
<li>Full Screen Voice interaction</li>
<li>Feedback for skills.</li>
<li>Displaying SUSI skills</li>
</ul>
</div>
<div class="section" id="communication">
<span id="communication"></span><h2>Communication<a class="headerlink" href="#communication" title="Permalink to this headline">¶</a></h2>
<p>Please join our mailing list to discuss questions regarding the project: https://groups.google.com/forum/#!forum/susiai</p>
<p>Our chat channel is on gitter here: https://gitter.im/fossasia/susi_android</p>
</div>
<div class="section" id="screenshots">
<span id="screenshots"></span><h2>Screenshots<a class="headerlink" href="#screenshots" title="Permalink to this headline">¶</a></h2>
<table>
  <tr>
    <td><img src="docs/_static/login.png" height = "480" width="270"></td>
    <td><img src="docs/_static/signup.png" height = "480" width="270"></td>
    <td><img src="docs/_static/message.png" height = "480" width="270"></td>
  </tr>
  <tr>
    <td><img src="docs/_static/message_map.png" height = "480" width="270"></td>
    <td><img src="docs/_static/message_select.png" height = "480" width="270"></td>
    <td><img src="docs/_static/settings.png" height = "480" width="270"></td>
  </tr>
</table></div>
<div class="section" id="development">
<span id="development"></span><h2>Development<a class="headerlink" href="#development" title="Permalink to this headline">¶</a></h2>
<p>A native Android app using both Java and Kotlin for writing code. The answers for user queries comes from <a class="reference external" href="https://github.com/fossasia/susi_server">SUSI Server</a> which further uses skills defined in <a class="reference external" href="https://github.com/fossasia/susi_skill_data">SUSI Skill Data</a>.</p>
<div class="section" id="android-app-development-set-up">
<span id="android-app-development-set-up"></span><h3>Android App Development Set up<a class="headerlink" href="#android-app-development-set-up" title="Permalink to this headline">¶</a></h3>
<p>Please find info about the set up of the Android app in your development environment <a class="reference internal" href="docs/Android_App_Setup.html"><span class="doc">here</span></a>.</p>
</div>
<div class="section" id="libraries-used-and-their-documentation">
<span id="libraries-used-and-their-documentation"></span><h3>Libraries used and their documentation<a class="headerlink" href="#libraries-used-and-their-documentation" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Realm <a class="reference external" href="https://realm.io/docs/java/latest/">Docs</a></li>
<li>Retrofit <a class="reference external" href="http://square.github.io/retrofit/2.x/retrofit/">Docs</a></li>
<li>ButterKnife <a class="reference external" href="http://jakewharton.github.io/butterknife/javadoc/">Docs</a></li>
<li>Espresso <a class="reference external" href="https://google.github.io/android-testing-support-library/docs/espresso/">Docs</a></li>
<li>Tajchert Waiting Dots <a class="reference external" href="https://github.com/tajchert/WaitingDots">Docs</a></li>
<li>Picasso <a class="reference external" href="http://square.github.io/picasso/">Docs</a></li>
<li>LeakCanary <a class="reference external" href="https://github.com/square/leakcanary">Docs</a></li>
<li>LeonardoCardoso/Android-Link-Preview <a class="reference external" href="https://github.com/LeonardoCardoso/Android-Link-Preview">Docs</a></li>
</ul>
</div>
<div class="section" id="project-conventions">
<span id="project-conventions"></span><h3>Project Conventions<a class="headerlink" href="#project-conventions" title="Permalink to this headline">¶</a></h3>
<p>There is certain conventions we follow in the project, we recommend that you become familiar with these so that the development process is uniform for everyone:</p>
<div class="section" id="mvp">
<span id="mvp"></span><h4>MVP<a class="headerlink" href="#mvp" title="Permalink to this headline">¶</a></h4>
<p>The project follows Model-View-Presenter design pattern and requires schematic interfaces for each component to be written first as contracts and then implemented.All the interactions are done using interfaces only. This means any model, view or presenter will only be referenced by its interface. We do so it is easy to mock and test them and there is no discrepancy in the callable methods of the concrete class and the interface.We realize that MVP is opinionated and there is no strict boundary between the responsibility of each component, but we recommend following this style:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">View</span></code> is passive and dumb, there is no logic to be exercised in View, only the ability to show data provided by the presenter through contract is present in the View. This makes it easy to unit test and remove the dependence on Android APIs, thus making the need of instrumentation tests scarce</li>
<li><code class="docutils literal"><span class="pre">Presenter</span></code> is responsible for most of the business logic, manipulation of data and organising it for the view to present. All logic for the app is present here and it is devoid of ANY Android related code, making it 100% unit testable. We have created wrapper around common Android APIs in form of models so that they can be mocked and presenter stays clean. The responsibility of presenter includes the fetching of data from external source, observing changes and providing the view with the latest data. It also needs to handle all View interactions that require any logic, such as UI triggers causing complex interactions. Notable exception for this is launching of an Activity on click of a button. There is no logic required in the action and is completely dependent on Android APIs. Lastly, presenter should always clean up after the view is detached to prevent memory leaks</li>
<li><code class="docutils literal"><span class="pre">Model</span></code> has the responsibility to hold the data, load it intelligently from appropriate source, be it disk or network, monitor the changes and notify presenter about those, be self sufficient; meaning to update data accordingly as needed without any external trigger (saving the data in disk after updating from network and providing the saved data from next time on), but be configurable (presenter may be able to ask for fresh data from network). The presenter should not worry about the data loading and syncing conditions (like network connectivity, failed update, scheduling jobs, etc) as it is the job of model itself.</li>
</ul>
</div>
<div class="section" id="use-of-kotlin">
<span id="use-of-kotlin"></span><h4>Use of Kotlin<a class="headerlink" href="#use-of-kotlin" title="Permalink to this headline">¶</a></h4>
<p>Around 50% of the App is written in <a class="reference external" href="https://kotlinlang.org/">Kotlin</a>. Kotlin is a very similar language to Java but with much more advantages then Java. It is easy to adapt and learn. So, you need not worry if you don&#8217;t have prior experience with it. Follow <a class="reference external" href="https://kotlinlang.org/docs/reference/">these</a> docs for syntax reference. The latest Android Canary Version has in built support for Kotlin but if you don&#8217;t have the Canary version, you can add Kotlin Plugin in your Android Studio. Follow <a class="reference external" href="https://android.jlelse.eu/setup-kotlin-for-android-studio-1bffdf1362e8">this</a> link to see how to do that.</p>
</div>
<div class="section" id="project-structure">
<span id="project-structure"></span><h4>Project Structure<a class="headerlink" href="#project-structure" title="Permalink to this headline">¶</a></h4>
<p>Generally, projects are created using package by layer approach where packages are names by layers like <code class="docutils literal"><span class="pre">ui</span></code>, <code class="docutils literal"><span class="pre">activity</span></code>, <code class="docutils literal"><span class="pre">fragment</span></code>, etc but it quickly becomes unscalable in large projects where large number of unrelated classes are crammed in one layer and it becomes difficult to navigate through them.Instead, we follow package by feature, which at the cost of flatness of our project, provides us packages of isolated functioning related classes which are likely to be a complete self sufficient component of the application. Each package all related classes of view, presenter, their implementations like Activities anf Fragments.A notable exception to this is the <code class="docutils literal"><span class="pre">helper</span></code> module and data classes like Models and Repositories as they are used in a cross component way.<em><strong>Note:</strong> The interface contract for Presenter and View is present in <code class="docutils literal"><span class="pre">contract</span></code> package in each module`</em></p>
</div>
<div class="section" id="separation-of-concerns">
<span id="separation-of-concerns"></span><h4>Separation of concerns<a class="headerlink" href="#separation-of-concerns" title="Permalink to this headline">¶</a></h4>
<p>Lastly, each class should only perform one task, do it well, and be unit tested for it. For example, if a presenter is doing more than it should, i.e., parsing dates or implementing search logic, better move it in its own class. There can be exceptions for this practice, but if the functionality can be generalised and reused, it should most definitely be transferred in its own class and unit tested.</p>
</div>
</div>
</div>
<div class="section" id="contributions-best-practices">
<span id="contributions-best-practices"></span><h2>Contributions Best Practices<a class="headerlink" href="#contributions-best-practices" title="Permalink to this headline">¶</a></h2>
<div class="section" id="branch-policy">
<span id="branch-policy"></span><h3>Branch Policy<a class="headerlink" href="#branch-policy" title="Permalink to this headline">¶</a></h3>
<p>We have the following branches</p>
<ul class="simple">
<li><strong>development</strong> All development goes on in this branch. If you&#8217;re making a contribution, you are supposed to make a pull request to <em>development</em>. PRs to gh-pages must pass a build check and a unit-test check on Travis.</li>
<li><strong>master</strong> This contains shipped code. After significant features/bugfixes are accumulated on development, we make a version update, and make a release.</li>
<li><strong>apk</strong> This branch contains two apk&#8217;s, that are automatically generated on merged pull request a) debug apk and b) release apk.</li>
</ul>
</div>
<div class="section" id="code-practices">
<span id="code-practices"></span><h3>Code practices<a class="headerlink" href="#code-practices" title="Permalink to this headline">¶</a></h3>
<p>Please help us follow the best practice to make it easy for the reviewer as well as the contributor. We want to focus on the code quality more than on managing pull request ethics.</p>
<ul class="simple">
<li>Single commit per pull request</li>
<li>For writing commit messages please read the <a class="reference internal" href="docs/commitStyle.html"><span class="doc">COMMITSTYLE</span></a> carefully. Kindly adhere to the guidelines.</li>
<li>Follow uniform design practices. The design language must be consistent throughout the app.</li>
<li>The pull request will not get merged until and unless the commits are squashed. In case there are multiple commits on the PR, the commit author needs to squash them and not the maintainers cherrypicking and merging squashes.</li>
<li>If the PR is related to any front end change, please attach relevant screenshots in the pull request description.</li>
</ul>
</div>
<div class="section" id="join-the-development">
<span id="join-the-development"></span><h3>Join the development<a class="headerlink" href="#join-the-development" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Before you join development, please set up the project on your local machine, run it and go through the application completely. Press on any button you can find and see where it leads to. Explore. (Don&#8217;t worry ... Nothing will happen to the app or to you due to the exploring :wink: Only thing that will happen is, you&#8217;ll be more familiar with what is where and might even get some cool ideas on how to improve various aspects of the app.)</li>
<li>If you would like to work on an issue, drop in a comment at the issue. If it is already assigned to someone, but there is no sign of any work being done, please free to drop in a comment so that the issue can be assigned to you if the previous assignee has dropped it entirely.</li>
</ul>
</div>
</div>
<div class="section" id="for-developers-adding-fabric-api-key">
<span id="for-developers-adding-fabric-api-key"></span><h2>For Developers: Adding Fabric API KEY<a class="headerlink" href="#for-developers-adding-fabric-api-key" title="Permalink to this headline">¶</a></h2>
<ol>
<li><p class="first">Go to AndroidFest.xml
Replace the fabric_api_key with the Real Fabric API Key
Add: &lt;meta-data android:name=&#8221;io.fabric.ApiKey&#8221; android:value=&#8221;fabric_api_key&#8221; /&gt;</p>
</li>
<li><p class="first">Open the app/fabric.properties:
Replace the fabric_api_key with your actual Fabric API Secret.</p>
</li>
<li><p class="first">Open MainApplication.java,
a) After adding the API KEYS and API Secret
Uncomment the line: Fabric.with(this, new Crashlytics())</p>
<p>b) Add imports :
import com.crashlytics.android.Crashlytics;
import io.fabric.sdk.android.Fabric;</p>
</li>
<li><p class="first">Uncomment the line in the app/gradle
Line: apply plugin: &#8216;io.fabric&#8217;</p>
</li>
</ol>
</div>
<div class="section" id="for-testers-testing-the-app">
<span id="for-testers-testing-the-app"></span><h2>For Testers: Testing the App<a class="headerlink" href="#for-testers-testing-the-app" title="Permalink to this headline">¶</a></h2>
<p>If you are a tester and want to test the app, you have two ways to do that:</p>
<ol class="simple">
<li><strong>Installing APK on your device:</strong> You can get debug <a class="reference external" href="https://github.com/fossasia/susi_android/blob/apk/susi-debug.apk">APK</a> as well as Release <a class="reference external" href="https://github.com/fossasia/susi_android/blob/apk/susi-release.apk">APK</a> in apk branch of the repository. After each PR merge, both the APKs are automatically updated. So, just download the APK you want and install it on your device. The APKs will be always be latest one.</li>
<li><strong>Testing on <a class="reference external" href="https://appetize.io/app/mbpprq4xj92c119j7nxdhttjm0">appetize.io</a>:</strong> If you don&#8217;t want to download the APKs, you can simply go on <a class="reference external" href="https://appetize.io/app/mbpprq4xj92c119j7nxdhttjm0">this</a> link and use the App on an online simulator. You will always find latest version of App on that link because it is updated after each PR merge.</li>
</ol>
</div>
<div class="section" id="license">
<span id="license"></span><h2>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<p>This project is currently licensed under the Apache License Version 2.0. A copy of <a class="reference external" href="https://github.com/fossasia/susi_android/blob/master/LICENSE">LICENSE.md</a> should be present along with the source code. To obtain the software under a different license, please contact FOSSASIA.</p>
</div>
</div>


          </div>
        </div>

      </div>
    </main>
    <footer class="mdl-mini-footer">
      <div class="mdl-mini-footer__left-section">
        <div class="mdl-logo">
          <img src="../_static/susi-logo-footer.svg" class="footer-logo"/>
        </div>
        <ul class="mdl-mini-footer__link-list">
          <li><a href="http://blog.fossasia.org/?s=susi">Blog</a></li>
          <li><a href="http://github.com/fossasia/susi_server">Code</a></li>
        </ul>
      </div>
      <div class="mdl-mini-footer__right-section">
        <ul class="mdl-mini-footer__link-list">
          <li><a href="http://blog.fossasia.org/contact/">Contact</a></li>
        </ul>
      </div>
    </footer>
  </div>
  </body>
</html>